<?xml version="1.0"?>
<root main_tree_to_execute="MainTree">
    <BehaviorTree ID="MainTree">
      <Repeat num_cycles="-1">
        <Sequence>
            <!-- Secuencia de preguntar y escuchar el número de personas -->
            <Sequence>
                <Action ID="Speak" speech_text="Bienvenido. ¿Cuántas personas son?"/>
                <Action ID="Listen" listened_text="{listened_text}"/>
            </Sequence>

            <!-- Acción para contar personas con la información que se obtiene del 'Listen' -->
            <Action ID="CountPeople" personas="{listened_text}"/>
        </Sequence>
      </Repeat>
    </BehaviorTree>

    <TreeNodesModel>
        <!-- Nodo para Speak que pregunta el número de personas -->
        <Action ID="Speak">
            <input_port name="speech_text"/>
        </Action>

        <!-- Nodo para Listen que recoge el número de personas -->
        <Action ID="Listen">
            <output_port name="listened_text"/>
        </Action>

        <!-- Nodo para CountPeople que usa el número de personas recogido -->
        <Action ID="CountPeople">
            <input_port name="personas"/>
        </Action>

        <!-- Nodo adicional que puedes añadir si deseas la acción de ir a la puerta -->
        <Action ID="GoToDoor"/>
    </TreeNodesModel>

</root>
